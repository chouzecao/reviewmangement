# 系统发布前检查清单

## 代码质量检查

- [ ] 所有控制台日志输出已被移除或设置为仅在开发环境中显示
- [ ] 所有调试代码已被移除
- [ ] 所有TODO注释已被处理
- [ ] 代码格式已统一
- [ ] 所有未使用的导入和变量已被移除

## 数据处理检查

- [ ] 大量数据处理已进行测试（>5000条记录）
- [ ] 实现了数据分页或流式处理
- [ ] 数据导出功能已测试（HTML、PDF、Markdown、Excel）
- [ ] 已处理中文字符显示问题
- [ ] 图片处理逻辑已优化并处理可能的错误
- [ ] 处理了API潜在的返回HTML错误的情况

## 性能优化检查

- [ ] 资源加载已优化（压缩JS、CSS、图片）
- [ ] 已实现适当的懒加载策略
- [ ] 已添加适当的缓存策略
- [ ] API响应时间已优化
- [ ] 内存使用已优化（特别是大数据导出操作）

## 安全检查

- [ ] 所有API请求已经过身份验证/授权检查
- [ ] 跨站请求伪造(CSRF)保护已实现
- [ ] XSS攻击防护已实现
- [ ] 所有敏感数据都已妥善加密/处理
- [ ] 环境变量和密钥已正确配置且不在代码库中公开

## 部署前准备

- [ ] 环境变量文件已更新(`.env.production`)
- [ ] 前端构建脚本已优化内存使用(`NODE_OPTIONS="--max-old-space-size=4096"`)
- [ ] 后端启动脚本已优化内存使用(`NODE_OPTIONS="--max-old-space-size=512"`)
- [ ] 数据库连接字符串已更新
- [ ] 静态文件服务已配置
- [ ] CORS配置已验证

## 部署步骤

1. 合并所有更改到主分支
2. 执行构建脚本：`./build-for-sealos.sh`
3. 验证构建输出无错误
4. 在Sealos上部署，配置资源限制：
   - 前端容器：至少256MB内存
   - 后端容器：至少512MB内存
5. 验证部署成功并可访问
6. 执行功能测试，确保所有功能正常工作
7. 监控应用性能和错误日志

## 回滚计划

如果部署失败或出现关键问题：

1. 立即回滚到上一个稳定版本
2. 分析日志确定问题原因
3. 在开发环境中修复问题
4. 重新开始部署流程

## 最终检查

- [ ] 所有用户可见功能已在生产环境中验证
- [ ] 导出功能已在实际数据上测试
- [ ] 所有关键错误和警告已消除
- [ ] 应用性能符合预期
- [ ] 系统资源使用在可接受范围内 